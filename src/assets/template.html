<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script>
        var count = 0;

        var chess = #history#

            function countTest(){
                alert(count);
                count = count + 1;
            }

            function deleteLastNode(){
                var images = document.getElementById("images");
                var child = images.lastChild;
                if(child != null){
                    images.removeChild(child);
                    count = count - 1;
                }
            }

            function drawPieces(){
                var coords = getCoords();
                var offset_x = coords[0];
                var offset_y = coords[1];
                if(count < chess.length){
                    for(var i = 0; i < chess.length; i++) {
                        if(i == count){
                            draw(chess[i].x * 35 + offset_x + 5, chess[i].y * 35.8 + offset_y, chess[i].t);
                            count = count + 1;
                            break;
                        }
                    }
                }
            }

            function draw(x, y, type){
                var images = document.getElementById("images");
                var piece = new Image();
                if(type == 1){
                    piece.src = "black.png";
                }else{
                    piece.src = "white.png";
                }
                piece.style.position = "absolute";
                piece.style.left = x + "px";
                piece.style.top =  y + "px";
                images.appendChild(piece);
            }

            function getCoords(){
                var innerYValue = 0;
                var innerXValue = 0;
                var elem = document.getElementById("chessboard");

                while( elem != null ) {
                    innerYValue += elem.offsetTop;
                    innerXValue += elem.offsetLeft;
                    elem = elem.offsetParent;
                }
                return new Array(innerXValue, innerYValue);
            }

            </script>
        </head>
    <body>

        <h1 style="text-align:center;">JGomoku Game History Report</h1>
        <div id="images"></div>
        <p style="text-align:center;">
            <input type="image" onclick="deleteLastNode()" value="backward " src="backward.png" style="outline:none;"/>
            <img src="chessboard.jpg" alt="chessboard" id = "chessboard" align="center" />
            <input type="image" onclick="drawPieces()" value="forward " src="forward.png" style="outline:none;"/>
        </p>
    </body>
</html>
